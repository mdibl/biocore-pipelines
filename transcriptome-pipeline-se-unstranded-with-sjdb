class: Workflow
cwlVersion: v1.0
doc: 'RNA-seq pipeline - reads: PE'
$namespaces:
  sbg: 'https://www.sevenbridges.com/'
inputs:
  - id: default_adapters_file
    type: File
    doc: Adapters file
    'sbg:x': -51
    'sbg:y': 798
  - id: input_fastq_read1_files
    type: 'File[]'
    doc: Input read1 fastq files
    'sbg:x': -49
    'sbg:y': 622
  - id: nthreads_qc
    type: int
    doc: Number of threads - qc.
    'sbg:x': -49
    'sbg:y': 450
  - id: nthreads_quant
    type: int
    doc: Number of threads - quantification.
    'sbg:x': 1131.943603515625
    'sbg:y': 581.451416015625
  - id: nthreads_trimm
    type: int
    doc: Number of threads - trim.
    'sbg:x': 233.8576202392578
    'sbg:y': 196.13400268554688
  - id: rsem_reference_files
    type: Directory
    doc: >-
      RSEM genome reference files - generated with the rsem-prepare-reference
      command
    'sbg:x': 1140.5726318359375
    'sbg:y': 414.5402526855469
  - id: trimmomatic_jar_path
    type: string
    doc: Trimmomatic Java jar file
    'sbg:x': 0
    'sbg:y': 142
  - id: trimmomatic_java_opts
    type: string?
    doc: >-
      JVM arguments should be a quoted, space separated list (e.g. "-Xms128m
      -Xmx512m")
    'sbg:x': 0
    'sbg:y': 35
outputs:
  - id: bw_norm_files
    outputSource:
      - quant/bw_norm_files
    type: 'File[]'
    doc: Normalized by RPKM bigWig files.
    'sbg:x': 1823.9881591796875
    'sbg:y': 863.6415405273438
  - id: bw_raw_files
    outputSource:
      - quant/bw_raw_files
    type: 'File[]'
    doc: Raw bigWig files.
    'sbg:x': 1827.8177490234375
    'sbg:y': 745
  - id: featurecounts_counts
    outputSource:
      - quant/featurecounts_counts
    type: 'File[]'
    doc: Normalized fragment extended reads bigWig (signal) files
    'sbg:x': 1819.6854248046875
    'sbg:y': 610
  - id: output_count_raw_reads_read1
    outputSource:
      - qc/output_count_raw_reads_read1
    type: 'File[]'
    'sbg:x': 666.05908203125
    'sbg:y': 570
  - id: output_custom_adapters_read1
    outputSource:
      - qc/output_custom_adapters_read1
    type: 'File[]'
    'sbg:x': 666.05908203125
    'sbg:y': 463
  - id: output_data_fastq_read1_trimmed_files
    outputSource:
      - trim/output_data_fastq_read1_trimmed_files
    type: 'File[]'
    doc: Trimmed fastq files for paired read 1
    'sbg:x': 1129.390380859375
    'sbg:y': 23.657737731933594
  - id: output_diff_counts_read1
    outputSource:
      - qc/output_diff_counts_read1
    type: 'File[]'
    'sbg:x': 666.05908203125
    'sbg:y': 356
  - id: output_fastqc_data_files_read1
    outputSource:
      - qc/output_fastqc_data_files_read1
    type: 'File[]'
    doc: FastQC data files for paired read 1
    'sbg:x': 666.05908203125
    'sbg:y': 249
  - id: output_fastqc_report_files_read1
    outputSource:
      - qc/output_fastqc_report_files_read1
    type: 'File[]'
    doc: FastQC reports in zip format for paired read 1
    'sbg:x': 666.05908203125
    'sbg:y': 142
  - id: output_trimmed_read1_fastq_read_count
    outputSource:
      - trim/output_trimmed_read1_fastq_read_count
    type: 'File[]'
    doc: Trimmed read counts of paired read 1 fastq files
    'sbg:x': 1124.566162109375
    'sbg:y': -123.05827331542969
  - id: rsem_genes_files
    outputSource:
      - quant/rsem_genes_files
    type: 'File[]'
    doc: RSEM genes files
    'sbg:x': 1826.693115234375
    'sbg:y': 479.0752258300781
  - id: rsem_isoforms_files
    outputSource:
      - quant/rsem_isoforms_files
    type: 'File[]'
    doc: RSEM isoforms files
    'sbg:x': 1805.053466796875
    'sbg:y': 332.85345458984375
steps:
  - id: qc
    in:
      - id: default_adapters_file
        source: default_adapters_file
      - id: input_fastq_read1_files
        source:
          - input_fastq_read1_files
      - id: nthreads
        source: nthreads_qc
    out:
      - id: output_count_raw_reads_read1
      - id: output_custom_adapters_read1
      - id: output_diff_counts_read1
      - id: output_fastqc_data_files_read1
      - id: output_fastqc_report_files_read1
    run: 01-qc-se.cwl
    'sbg:x': 192
    'sbg:y': 450
  - id: quant
    in:
      - id: nthreads
        source: nthreads_quant
      - id: rsem_reference_files
        source: rsem_reference_files
    out:
      - id: bw_norm_files
      - id: bw_raw_files
      - id: featurecounts_counts
      - id: rsem_genes_files
      - id: rsem_isoforms_files
    run: 04-quantification-se-unstranded.cwl
    'sbg:x': 1406.0693359375
    'sbg:y': 599.9370727539062
  - id: trim
    in:
      - id: input_fastq_read1_files
        source:
          - input_fastq_read1_files
      - id: input_read1_adapters_files
        source:
          - qc/output_custom_adapters_read1
      - id: nthreads
        source: nthreads_trimm
      - id: trimmomatic_jar_path
        source: trimmomatic_jar_path
      - id: trimmomatic_java_opts
        source: trimmomatic_java_opts
    out:
      - id: output_data_fastq_read1_trimmed_files
      - id: output_trimmed_read1_fastq_read_count
    run: 02-trim-se.cwl
    'sbg:x': 666.05908203125
    'sbg:y': 7
requirements:
  - class: SubworkflowFeatureRequirement
